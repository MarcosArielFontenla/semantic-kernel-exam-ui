<ng-container class="exam-container">
  <div class="container mt-4">
    <div class="d-flex justify-content-center align-items-center">
      <h2 class="mb-4">Exam for {{ subject }}</h2>
    </div>
    <app-exam-progress
      [currentQuestionIndex]="currentQuestionIndex"
      [exam]="exam">
    </app-exam-progress>

    <app-custom-modal-question-validator
      [title]="this.modalValidatorTitle"
      [message]="this.modalValidatorMessage">
    </app-custom-modal-question-validator>

    <form (ngSubmit)="submitExam()">
      <!-- Predefined Exam Type -->
       @if (examType === this.predefined) {
        <app-predefined-exam
          [question]="currentQuestion"
          [currentIndex]="currentQuestionIndex">
        </app-predefined-exam>
      }

      <!-- Multiple Choice Exam Type -->
      @if (examType === this.multipleChoice) {
        <app-multiple-choice-exam
          [question]="currentQuestion"
          [currentIndex]="currentQuestionIndex">
        </app-multiple-choice-exam>
      }

      <!-- True - False Exam Type -->
      @if (examType === this.trueFalse) {
        <app-true-false-exam
          [question]="currentQuestion"
          [currentIndex]="currentQuestionIndex">
        </app-true-false-exam>
      }

      <div class="d-flex justify-content-center mt-4">
        @if (isLastQuestion) {
          <button
            *ngIf="isLastQuestion"
            mat-flat-button
            type="submit"
            class="btn btn-success mx-2"
            [disabled]="!canProceedToNextQuestion || loading">
            Submit Exam
          </button>
        }
      </div>
    </form>
    <div class="d-flex justify-content-center mt-4">
      <button
        mat-flat-button
        class="mx-2"
        (click)="goBack()">
        Go Home
      </button>

      <button
        mat-flat-button
        (click)="previousQuestion()"
        [disabled]="currentQuestionIndex === 0">
        Previous
      </button>

      @if (!isLastQuestion) {
        <button
          *ngIf="!isLastQuestion"
          mat-flat-button
          class="mx-2"
          (click)="onNextQuestion()"
          [appValidateAnswer]="currentQuestion.studentAnswer">
          Next
        </button>
      }
    </div>
  </div>
</ng-container>
